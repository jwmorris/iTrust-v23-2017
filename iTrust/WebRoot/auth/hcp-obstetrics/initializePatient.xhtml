<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:p="http://primefaces.org/ui"
	xmlns:itrust="/WEB-INF/tags.tld">
<f:view
	beforePhase="#{navigation_controller.redirectIfInvalidPatient()}" />
<h:body>
	<ui:composition template="/iTrust_template.xhtml">
		<ui:define name="pageTitle">iTrust - Patient Initialization Record</ui:define>
		<ui:define name="leftMenu">
			<ui:include src="/auth/hcp/menu.xhtml" />
		</ui:define>
		<ui:define name="mainContent">
			<c:set var="mid" scope="view" value="#{user.getUserNameForID(session.getAttribute('pid'))}" />
			<h:panelGroup rendered="#{!obstetrics_controller.checkPatientEligibility()}">
				<h:form>
				<h4>#{mid} is not eligible for Obstetrics care. Please choose a new patient or activate #{mid} for obstetrics.</h4>
				<h:commandButton value="New Patient"/>
				<h:commandButton value="Activate" action="#{obstetrics_controller.activatePatient()}"/>
				</h:form>
			</h:panelGroup>
			<h:panelGroup rendered="#{obstetrics_controller.checkPatientEligibility()}">
			<h3>Patient Initialization Records <small>of #{mid}</small></h3>
			<br/>
			<h:commandButton id="addNewPregnancy" type="" value="Add New Pregnancy"></h:commandButton>
			<br/>
			<br/>
			<h4>Current Pregnancy</h4>
			<h:form>
<!-- 				 <h:outputLabel for="dateInitialized">Date:</h:outputLabel>
				<h:outputText value=""/>
				<br/>
				<h:outputLabel for="edd">Estimated Due Date:</h:outputLabel>
				<h:outputText value="" />
				<br/>
				<h:outputLabel for="initialWeeksPregnant">Weeks Pregnant at initialization:</h:outputLabel>
				<h:outputText value="" /> -->
				
				<h:dataTable value="#{obstetrics_controller.currentPregnancy}" var="current">
					<h:column>
						<f:facet name = "header">Date Initialized</f:facet>
						#{current.dateInit}
					</h:column>
					<h:column>
						<f:facet name = "header">Last Menstrual Period (LMP)</f:facet>
						#{current.lmp}
					</h:column>
					<h:column>
						<f:facet name = "header">Estimated Due Date (EDD)</f:facet>
						#{current.edd}
					</h:column>
					
					<h:column>
						<f:facet name="header">Weeks Pregnant at initialization</f:facet>
						#{current.expectedWeeksPregnant}
					</h:column>
				</h:dataTable>
			</h:form>
			<br/>
			<h4>Prior Pregnancies</h4>
			<br/>
			<h:commandButton id="editPriorPregnancy" type="" value="Edit Prior Pregnancy"></h:commandButton>
    		<br/>
    		<br/>
    			<h:dataTable value="#{obstetrics_controller.priorPregnancies}" var="prior">
					<h:column>
						<f:facet name = "header">Date Initialized</f:facet>
						#{prior.dateInit}
					</h:column>
					<h:column>
						<f:facet name = "header">Last Menstrual Period (LMP)</f:facet>
						#{prior.lmp}
					</h:column>
					<h:column>
						<f:facet name = "header">Estimated Due Date (EDD)</f:facet>
						#{prior.edd}
					</h:column>
					
					<h:column>
						<f:facet name="header">Weeks Pregnant at initialization</f:facet>
						#{prior.expectedWeeksPregnant}
					</h:column>
					<h:column>
						<f:facet name = "header">Year of Conception</f:facet>
						#{prior.concepYear}
					</h:column>
					
					<h:column>
						<f:facet name = "header">Total Weeks Pregnant</f:facet>
						#{prior.totalWeeksPregnant}
					</h:column>
					
					<h:column>
						<f:facet name="header">Numbers of Hours in Labor</f:facet>
						#{prior.hrsLabor}
					</h:column>
					<h:column>
						<f:facet name = "header">Weight Gain During Pregnancy</f:facet>
						#{prior.weightGain}
					</h:column>
					
					<h:column>
						<f:facet name = "header">Delivery Type</f:facet>
						#{prior.deliveryType}
					</h:column>
					
					<h:column>
						<f:facet name="header">Multiple Pregnancies</f:facet>
						#{prior.multiplePregnancy}
					</h:column>
					
					<h:column>
						<f:facet name="header">Number of Babies</f:facet>
						#{prior.babyCount}
					</h:column>
				</h:dataTable>
			</h:panelGroup>
			
		</ui:define> 
	</ui:composition>
</h:body>
</html>